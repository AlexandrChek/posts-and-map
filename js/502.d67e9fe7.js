"use strict";(self["webpackChunkpostsviewer"]=self["webpackChunkpostsviewer"]||[]).push([[502],{9502:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var l=o(3396);const a=e=>((0,l.dD)("data-v-67cd1857"),e=e(),(0,l.Cn)(),e),r=a((()=>(0,l._)("div",{id:"map"},null,-1)));function n(e,t,o,a,n,s){const i=(0,l.up)("ModalRemover");return(0,l.wg)(),(0,l.iD)(l.HY,null,[r,n.isModalRemover?((0,l.wg)(),(0,l.j4)(i,{key:0,toDel:n.toDel,onCloseRemover:s.closeModal},null,8,["toDel","onCloseRemover"])):(0,l.kq)("",!0)],64)}o(7658);const s=e=>((0,l.dD)("data-v-7b2dd59c"),e=e(),(0,l.Cn)(),e),i={class:"modal-wrapper rounded"},p=s((()=>(0,l._)("p",{class:"text-center"},"Remove this marker?",-1))),d={class:"text-center"};function m(e,t,o,a,r,n){return(0,l.wg)(),(0,l.iD)("div",i,[p,(0,l._)("div",d,[(0,l._)("button",{class:"btn btn-danger m-2 px-0",onClick:t[0]||(t[0]=(...e)=>n.removeM&&n.removeM(...e))},"Remove"),(0,l._)("button",{class:"btn btn-danger m-2 px-0",onClick:t[1]||(t[1]=(...e)=>n.close&&n.close(...e))},"Cancel")])])}var c={name:"ModalRemover",props:["toDel"],methods:{removeM(){sessionStorage.setItem("toDel",JSON.stringify(this.toDel)),this.$emit("closeRemover"),location.reload()},close(){this.$emit("closeRemover")}}},g=o(89);const u=(0,g.Z)(c,[["render",m],["__scopeId","data-v-7b2dd59c"]]);var v=u,h={name:"MapView",components:{ModalRemover:v},data(){return{map:[],isModalRemover:!1,toDel:{}}},mounted(){if(this.map=L.map("map",{zoomControl:!1}).setView([48.2,30.63],6),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),window.innerWidth>=768&&L.control.zoom({position:"bottomright"}).addTo(this.map),localStorage.getItem("oldMarkers")){let e=JSON.parse(localStorage.getItem("oldMarkers"));if(JSON.parse(sessionStorage.getItem("toDel"))){let t=JSON.parse(sessionStorage.getItem("toDel"));e=e.filter((e=>e.lat!==t.lat&&e.lng!==t.lng)),localStorage.setItem("oldMarkers",JSON.stringify(e))}console.log(e),e.forEach((e=>{let t={lat:e.lat,lng:e.lng},o=L.marker(t).addTo(this.map);o.bindTooltip(e.tooltip),o.on("contextmenu",this.getModalRemover)}))}this.map.on("click",this.onMapClick)},methods:{onMapClick(e){let t=L.marker(e.latlng).addTo(this.map),o=L.popup();o.setLatLng(e.latlng).setContent('Enter title <input type="text" oninput="localStorage.setItem(\'tooltip\', value)"><br/><br/>Latitude: '+e.latlng.lat+"<br/>Longitude: "+e.latlng.lng).openOn(this.map),t.bindPopup(o),t.on("popupclose",(function(){let o=localStorage.getItem("tooltip");t.bindTooltip(o);let l=e.latlng;if(l.tooltip=o,localStorage.getItem("oldMarkers")){let e=JSON.parse(localStorage.getItem("oldMarkers"));e.push(l),localStorage.setItem("oldMarkers",JSON.stringify(e))}else{let e=[];e.push(l),localStorage.setItem("oldMarkers",JSON.stringify(e))}}))},getModalRemover(e){this.isModalRemover=!0,this.toDel=e.latlng},closeModal(){this.isModalRemover=!1}}};const M=(0,g.Z)(h,[["render",n],["__scopeId","data-v-67cd1857"]]);var k=M}}]);
//# sourceMappingURL=502.d67e9fe7.js.map